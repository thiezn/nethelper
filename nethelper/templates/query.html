{% extends "base.html" %}

<div class="jumbotron">
    <h1>IP Stuff</h1>
    <p>Bla me please</p>
</div>

{% block content %}

<div class=row">
    <center><h2>Your IP address is {{ client_ip }}</h2></center>
    <!-- Hiding your session details for the moment
    {% for key, value in client_headers.items() %}
        <div class="col-sm-3">
            <label for="{{ key }}">{{ key }}</label>
        </div>
        <div class="input-group col-sm-9">
            <input id="{{ key }}" type="text" class="form-control" value="{{ value }}" readonly>
            <span class="input-group-btn">
                <button class="btn btn-default copyButton" type="button" data-clipboard-target="#{{ key }}" >
                    <span class="glyphicon glyphicon-share" aria-hidden="true"></span>
                </button>
            </span>
        </div>
    {% endfor %}
    -->
</div>

<div class="row">
    <div class="col-md-3">
        <h2>Network</h2>
        <form class="form-inline" action="/" method="get" accept-charset="utf-8">
            <div class="form-group">
                <label for="network" class="sr-only">network</label>
                <span class="input-group-btn">
                    <input class="form-control" id="network" name="network" placeholder="eg. 10.0.0.0/24" {% if network %}value="{{ network.network }}/{{ network.bitmask }}"{% endif %}></input>
                    <button class="btn btn-primary" type="submit" value="network">
                        <span class="glyphicon glyphicon-share" aria-hidden="true"></span>
                    </button>
                </span>
            </div>
        </form>
    </div> <!-- network query -->
    <div class="col-md-3">
        <h2>Port</h2>
        <form class="form-inline" action="/" method="get" accept-charset="utf-8">
            <div class="form-group">
                <label for="port" class="sr-only">port</label>
                <span class="input-group-btn">
                    <input class="form-control" id="port" name="port" placeholder="eg. 22" {% if port %}value="{{ port.port }}"{% endif %}></input>
                    <button class="btn btn-primary" type="submit" value="port">
                        <span class="glyphicon glyphicon-share" aria-hidden="true"></span>
                    </button>
                </span>
            </div>
        </form>
    </div> <!-- port query -->
    <div class="col-md-3">
        <h2>MAC Address</h2>
        <form class="form-inline" action="/" method="get" accept-charset="utf-8">
            <div class="form-group">
                <label for="mac" class="sr-only">mac</label>
                <span class="input-group-btn">
                    <input class="form-control" id="mac" name="mac" placeholder="eg. 0011.2233.4455" {% if mac %}value="{{ mac.mac_address }}"{% endif %}></input>
                    <button class="btn btn-primary" type="submit" value="mac">
                        <span class="glyphicon glyphicon-share" aria-hidden="true"></span>
                    </button>
                </span>
            </div>
        </form>
    </div> <!-- network metric conversions -->
    <div class="col-md-3">
        <h2>Metrics</h2>
        <form class="form-inline" action="/" method="get" accept-charset="utf-8">
            <div class="form-group">
                <label for="metric" class="sr-only">mac</label>
                <span class="input-group-btn">
                    <input class="form-control" id="metric" name="metric" placeholder="eg. 1024" {% if metric %}value="{{ metric.kbps}}"{% endif %}></input>
                    <button class="btn btn-primary" type="submit" value="metric">
                        <span class="glyphicon glyphicon-share" aria-hidden="true"></span>
                    </button>
                </span>
            </div>
        </form>
    </div> <!-- metric query -->
</div> <!-- /row -->


{% if network or port or mac or metric %}
    <div class="row">
        <center><h2>Results</h2></center>
        {% if network %}
            {% for key, value in network.to_json().items() %}
                <div class="col-sm-3">
                    <label for="{{ key }}">{{ key }}</label>
                </div>
                <div class="input-group col-sm-9">
                    <input id="{{ key }}" type="text" class="form-control" value="{{ value }}" readonly>
                    <span class="input-group-btn">
                        <button class="btn btn-default copyButton" type="button" data-clipboard-target="#{{ key }}" >
                            <span class="glyphicon glyphicon-share" aria-hidden="true"></span>
                        </button>
                    </span>
                </div>
            {% endfor %}
        {% endif %}

        {% if port %}
            {% for key, value in port.to_json().items() %}
                <div class="col-sm-3">
                    <label for="{{ key }}">{{ key }}</label>
                </div>
                <div class="input-group col-sm-9">
                    <input id="{{ key }}" type="text" class="form-control" value="{{ value }}" readonly>
                    <span class="input-group-btn">
                        <button class="btn btn-default copyButton" type="button" data-clipboard-target="#{{ key }}" >
                            <span class="glyphicon glyphicon-share" aria-hidden="true"></span>
                        </button>
                    </span>
                </div>
            {% endfor %}
        {% endif %}

        {% if mac %}
            {% for key, value in mac.to_json().items() %}
                <div class="col-sm-3">
                    <label for="{{ key }}">{{ key }}</label>
                </div>
                <div class="input-group col-sm-9">
                    <input id="{{ key }}" type="text" class="form-control" value="{{ value }}" readonly>
                    <span class="input-group-btn">
                        <button class="btn btn-default copyButton" type="button" data-clipboard-target="#{{ key }}" >
                            <span class="glyphicon glyphicon-share" aria-hidden="true"></span>
                        </button>
                    </span>
                </div>
            {% endfor %}
        {% endif %}
    </div>  <!-- /row -->
</div>
{% endif %}

{% endblock content %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js"></script>
<script>
    var clipboard = new Clipboard('.copyButton');
    clipboard.on('success', function(e) {
        console.log(e);
    });
    clipboard.on('error', function(e) {
        console.log(e);
    });
</script>
{% endblock scripts %}
